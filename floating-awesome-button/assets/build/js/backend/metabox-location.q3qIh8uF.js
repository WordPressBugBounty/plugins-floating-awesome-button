window.FAB_METABOX_LOCATION={...window.FAB_METABOX_LOCATION,defaultOptions:{...window.FAB_METABOX_LOCATION.defaultOptions,type:[]},init:()=>{let{labels:e,check_invalid_rules:t}=window.FAB_METABOX_LOCATION;jQuery("#post").on("submit",function(){let r=t();if(jQuery("#fab-location-rules .fab-location-rule-item").length==1&&r){let n=jQuery("#fab-location-rules .fab-location-rule-item").last();return["fab_location_type","fab_location_operator","fab_location_value","fab_location_logic"].forEach(l=>{jQuery(`.select2[name^="${l}"]`,n).val("").trigger("change")}),!0}return r&&jQuery.dialog({icon:"fas fa-times",closeIcon:!0,animation:"scale",columnClass:"j-small",title:e.invalid_rule_title,content:e.invalid_rule}),!r})},init_type_options:()=>{let{integrations:e,defaultOptions:t,labels:r}=window.FAB_METABOX_LOCATION;t.select2={placeholder:r.placeholder},t.type=[...t.type],e&&(t.type=[...t.type,...Object.values(e)]),window.FAB_METABOX_LOCATION.defaultOptions=t},get_type_data:e=>{let{types:t}=window.FAB_METABOX_LOCATION;return Object.values(t).map(r=>r.children.find(i=>i.id===e)).find(Boolean)||null},check_invalid_rules:()=>{let{labels:e}=window.FAB_METABOX_LOCATION;const t=[{selector:'.select2[name^="fab_location_type"]',label:e.rule_type},{selector:'[name^="fab_location_operator"]',label:e.rule_operator},{selector:'[name^="fab_location_value"]',label:e.rule_value},{selector:'[name^="fab_location_logic"]',label:e.rule_logic}];let r=!1;return jQuery("#fab-location-rules .fab-location-rule-item").each(function(){for(const i of t)if(!jQuery(i.selector,this).val())return console.warn(`Invalid rule: Missing ${i.label}`),r=!0,!1;if(r)return!1}),r},reloadSelect2:(e,t)=>{t.selectedValue||(t.selectedValue=e.val()),e.data("select2")&&(e.select2("destroy"),e.empty()),e.select2(t),e.val(t.selectedValue),e.trigger("change")},getComparatorOption:(e,t)=>{let{defaultOptions:r,getComparatorOptionTaxonomyTermAjax:i,getComparatorOptionSingleAjax:n}=window.FAB_METABOX_LOCATION;return!e||e===void 0||e===""||(e.includes("taxonomy_")?t.ajax=i(e):e.includes("single_")&&(t.ajax=n(e))),t},getComparatorOptionSingleAjax:e=>{let{isNumeric:t}=window.FAB_PLUGIN,{rest_url:r,get_type_data:i}=window.FAB_METABOX_LOCATION,n=i(e);return{delay:500,dataType:"json",url:function(a){e=e.replace("single_","");let l=n.rest_base;return l=l||e,l+=t(a.term)?`/${a.term}`:"",`${r}wp/v2/${l}`},data:a=>{let l={_fields:"id,title"};return t(a.term)||(l={...l,filter:{post_status:"publish,private"},page:a.page||1,search:a.term,orderby:"title",order:"asc"}),window.FAB_METABOX_LOCATION.ajax_params=l,l},processResults:function(a){let l={more:!1};return window.FAB_METABOX_LOCATION.ajax_params.page<this._request.getResponseHeader("X-WP-TotalPages")&&(l.more=!0),Array.isArray(a)||(a=[a]),a=a.map(function(o,s){return{id:o.id,text:o.title.rendered.replace(/[^\w\s]/gi,"")}}),{results:a,pagination:l}}}},getComparatorOptionTaxonomyTermAjax:e=>{let{isNumeric:t}=window.FAB_PLUGIN,{rest_url:r,get_type_data:i}=window.FAB_METABOX_LOCATION,n=i(e);return{delay:500,dataType:"json",url:a=>{e=e.replace("taxonomy_","");let l=n.rest_base;return l=l||e,l+=t(a.term)?`/${a.term}`:"",`${r}wp/v2/${l}`},data:a=>{let l={};return t(a.term)||(l={page:a.page||1,per_page:10,search:a.term}),window.FAB_METABOX_LOCATION.ajax_params=l,l},processResults:function(a){let l={more:!1};return window.FAB_METABOX_LOCATION.ajax_params.page<this._request.getResponseHeader("X-WP-TotalPages")&&(l.more=!0),a=a.map(function(o,s){return{id:o.id,text:o.name.replace(/[^\w\s]/gi,"")}}),{results:a,pagination:l}}}}};
//# sourceMappingURL=metabox-location.q3qIh8uF.js.map
